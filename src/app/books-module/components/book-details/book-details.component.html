<div class="row">
  <div class="col-md-12">
    <div class="header">
      <p>Gestión de Libros</p>
      <button class="btn btn-primary" (click)="isAddingNew = true">Registrar Libro</button>
    </div>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>ID</th>
          <th>Título</th>
          <th>Autor</th>
          <th>Género</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <p>
        Books length: {{books.length}} 
      </p>
      <tbody>
        <ng-container *ngFor="let book of books; let i = index">
            <tr>
            <td>{{ i + 1 }}</td>
            <td>{{ book.title }}</td>
            <td>{{ book.author }}</td>
            <td>{{book.gender}}</td>
            
            <td >
              <button  (click)="updateBook(book);isEditing = true">Edit</button>
              <button (click)="deleteBook(book.id)">Delete</button>
            </td>
          </tr>
        </ng-container>
      </tbody>
    </table>
  </div>
</div>


<div class="container" style="max-width: 500px;" *ngIf="isAddingNew">
  <!--Formulario de registro-->
  <form [formGroup]="bookForm">
    <h6 class="form-title">Registrar Libro</h6>
    <div class="row">
      <div class="col-md-6">
        <div class="form-group">
          <label for="title">Título</label>
          <input type="text" class="form-control" id="title" placeholder="Título" formControlName="title" />
        </div>
        <div class="form-group">
          <label for="author">Autor</label>
          <input type="text" class="form-control" id="author" placeholder="Autor" formControlName="author" />
        </div>
        <div class="form-group">
          <label for="publicationYear">Año de Publicación</label>
          <input type="text" class="form-control" id="publicationYear" placeholder="Año de Publicación" formControlName="publicationYear" />
        </div>
        <div class="form-group">
          <label for="gender">Género</label>
          <input type="text" class="form-control" id="gender" placeholder="Género" formControlName="gender" />
        </div>
        <div class="form-group">
          <label for="availablequantity">Cantidad Disponible</label>
          <input type="text" class="form-control" id="availablequantity" placeholder="Cantidad Disponible" formControlName="availablequantity" />
        </div>
      </div>
    </div>
    <div class="form-group text-center">
      <button class="btn btn-secondary btn-sm" (click)="cancelForm()">Cancelar</button>
      <button class="btn btn-success btn-sm" (click)="isAddingNew = false;addBook()">Guardar</button>
    </div>
  </form>
</div>


<!--Formulario de Edición-->
<div class="container" style="max-width: 500px;">
  <form [formGroup]="bookForm" (ngSubmit)="onUpdate()" *ngIf="isEditing">
   <h6>Editar Libro</h6>
    <label>Título</label>
    <input type="text" formControlName="title" name="title">
    <label>Autor</label>
    <input type="text" formControlName="author" name="author">
    <label>Año Publicación</label>
    <input type="text" formControlName="publicationYear" name="publicationYear">
    <label>Género</label>
    <input type="text" formControlName="gender" name="gender">
    <label>Cantidad Disponible</label>
    <input type="text" formControlName="availablequantity" name="availablequantity">
    <label>ISBN</label>
    <input type="text" formControlName="isbn_code" name="isbn_code">
    <button class="btn btn-secondary btn-sm" (click)="cancelForm()">Cancelar</button>
    <button type="submit" (click)="isEditing = true">Guardar</button>
  </form>
</div>

